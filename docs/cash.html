<!DOCTYPE html>

<html>
<head>
  <title>cash.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>cash.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(window)</span> </span>{
<span class="hljs-keyword">var</span> proto = <span class="hljs-built_in">Array</span>.prototype, slice = proto.slice, isArray = <span class="hljs-built_in">Array</span>.isArray, keys = <span class="hljs-built_in">Object</span>.keys,
cssNum = {<span class="hljs-string">'column-count'</span>:<span class="hljs-number">1</span>,<span class="hljs-string">'columns'</span>:<span class="hljs-number">1</span>,<span class="hljs-string">'font-weight'</span>:<span class="hljs-number">1</span>,<span class="hljs-string">'line-height'</span>:<span class="hljs-number">1</span>,<span class="hljs-string">'opacity'</span>: <span class="hljs-number">1</span>,<span class="hljs-string">'z-index'</span>:<span class="hljs-number">1</span>,<span class="hljs-string">'zoom'</span>:<span class="hljs-number">1</span>};</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>When calling addPx, send value first as there may be no key</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addPx</span><span class="hljs-params">(v, k)</span> </span>{<span class="hljs-keyword">return</span> (<span class="hljs-keyword">typeof</span> v === <span class="hljs-string">'number'</span> &amp;&amp; (!k || !cssNum[k])) ? v + <span class="hljs-string">'px'</span> : v;}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cash</span><span class="hljs-params">(arg)</span> </span>{<span class="hljs-keyword">return</span> cash.init(arg);}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isDocument</span><span class="hljs-params">(arg)</span> </span>{<span class="hljs-keyword">return</span> arg &amp;&amp; arg.nodeType === arg.DOCUMENT_NODE;}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isFunction</span><span class="hljs-params">(arg)</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> arg === <span class="hljs-string">'function'</span>; }
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isObject</span><span class="hljs-params">(arg)</span> </span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.prototype.toString.call(arg) === <span class="hljs-string">'[object Object]'</span>;}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isString</span><span class="hljs-params">(arg)</span> </span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> arg === <span class="hljs-string">'string'</span>;}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isWindow</span><span class="hljs-params">(arg)</span> </span>{<span class="hljs-keyword">return</span> arg === <span class="hljs-built_in">window</span>;}</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <h3 id="cache">cache</h3>
<p>Hash that holds the event and display data</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>cash.cache = {events: {}, display: {}};</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>generate a unique id for elements</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>cash._cid_ = <span class="hljs-number">0</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <h3 id="get">get</h3>
<p>Return the entire <code>q</code> or a particular element located at an index by 
passing nothing or a number respectively. Note that you can pass a 
negative number to fetch from the <strong>end</strong> of the <code>q</code> (-1 for the last for example).</p>
<p><code>param</code> {number} <code>i</code></p>
<p><code>returns</code> {array|element}</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>cash.get = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(i)</span> </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>intentional coercion </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">return</span> i == <span class="hljs-literal">null</span> ? <span class="hljs-keyword">this</span>.q : (i &gt; -<span class="hljs-number">1</span> ? <span class="hljs-keyword">this</span>.q[i]: <span class="hljs-keyword">this</span>.q[<span class="hljs-keyword">this</span>.q.length + (i)]);
};</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>fetch the unique identifier for this element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>cash._getCid_ = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(el)</span> </span>{
  <span class="hljs-keyword">return</span> isWindow(el) ? <span class="hljs-string">'window'</span> : isDocument(el) ? <span class="hljs-string">'document'</span> : el.getAttribute(<span class="hljs-string">'cid'</span>);
};</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <h3 id="getuid">getUid</h3>
<p>Return a unique identifier via the <em>cid</em> with an optional passed in prefix</p>
<p><code>param</code> {string} <code>pre</code> Optional prefix for the identifier</p>
<p><code>returns</code> {string}</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>cash.getUid = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(pre)</span> </span>{
  <span class="hljs-keyword">var</span> n = ++<span class="hljs-keyword">this</span>._cid_;
  <span class="hljs-keyword">return</span> pre ? pre + n : <span class="hljs-built_in">String</span>(n);
};</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>init
Breaking from the jQuery pattern, only a singile DOM node or NodeList is
expected as arguments (though an array is acceptable). The passed in arg
is normalized into an array and set as $.q. All chainable methods then
operate on the q.</p>
<p><code>param</code> {element|nodeList|array} <code>arg</code></p>
<p><code>returns</code> cash</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>cash.init = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(arg)</span> </span>{
  arg || (arg = []);
  <span class="hljs-keyword">this</span>.q = isArray(arg) ? arg : 
    (arg <span class="hljs-keyword">instanceof</span> NodeList || arg <span class="hljs-keyword">instanceof</span> HTMLCollection) ? slice.call(arg) : [arg];
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <h3 id="isobject">isObject</h3>
<p>Ye olde toString fallback to see if a passed in argument is an object.
Really you should test the other cases (Array.isArray for example) but this
does ‘even’ the API a little</p>
<p><code>param</code> {*}</p>
<p><code>returns</code> {bool}</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>cash.isObject = isObject;</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <h3 id="noop">noop</h3>
<p>Empty function</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>cash.noop = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{},</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <h3 id="setcache">setCache</h3>
<p><code>private</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>cash._setCache_ = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(ref, el)</span> </span>{
  <span class="hljs-keyword">var</span> cid = <span class="hljs-keyword">this</span>._getCid_(el),
    obj = <span class="hljs-keyword">this</span>.cache[ref];
  <span class="hljs-keyword">if</span>(!cid) {
    cid = <span class="hljs-keyword">this</span>.getUid();
    el.setAttribute(<span class="hljs-string">'cid'</span>, cid);
  }
  obj[cid] || (obj[cid] = ref === <span class="hljs-string">'events'</span> ? {} : <span class="hljs-literal">undefined</span>);
  <span class="hljs-keyword">return</span> obj;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <h3 id="-_all-_">_all_</h3>
<p>Abstracted logic for the call, assign, and collect methods</p>
<p><code>private</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>cash._all_ = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(oArgs, assign, returns)</span> </span>{
  <span class="hljs-keyword">var</span> meths = oArgs[<span class="hljs-number">0</span>].split(<span class="hljs-string">'.'</span>), args = slice.call(oArgs, <span class="hljs-number">1</span>),
  meth = meths.pop(), r = returns ? [] : <span class="hljs-literal">undefined</span>, f, v;

  <span class="hljs-keyword">this</span>.q.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(el)</span> </span>{
    meths.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(prop)</span> </span>{
      f = el[prop];</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>TODO are we sure of a return here?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      el = isFunction(f) ? f() : f;
    });
    <span class="hljs-keyword">if</span>(assign) v = el[meth] = args[<span class="hljs-number">0</span>];
    <span class="hljs-keyword">else</span> {
      f = el[meth];
      v = isFunction(f) ? f.apply(el, args) : f;
    }
    returns &amp;&amp; r.push(v);
  });
  <span class="hljs-keyword">return</span> returns ? r : <span class="hljs-keyword">this</span>;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <h3 id="call">call</h3>
<p>Invokes the provided method or method chain with the provided arguments to all elements in q.
Example usage:</p>
<ul>
<li>$(nodeList).call(‘setAttribute’, ‘foo’, ‘bar’);</li>
<li>$(nodeList).call(‘classList.add’, ‘active’);</li>
</ul>
<p><code>param</code> {string} <code>methodName</code>. Can be a string representing a method name, an attribute, or a property. Can be chained with periods.</p>
<p><code>returns</code> cash</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>cash.call = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._all_(<span class="hljs-built_in">arguments</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>);
};</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <h3 id="assign">assign</h3>
<p>Sets the value on all elements in the q. Setters can be chained with periods.
Example usage:</p>
<ul>
<li>$(nodeList).assign(‘checked’, true)</li>
<li>$(nodeList).assign(‘foo.bar’, ‘biz’)</li>
</ul>
<p><code>param</code> {string} <code>propertyName</code>. Can be a string representing an attribute or property. Can be chained with periods.
<code>param</code> {any} <code>value</code>. The value to be assigned.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>cash.assign = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._all_(<span class="hljs-built_in">arguments</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>);
};</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <h3 id="collect">collect</h3>
<p>Similar to call(), collect() invokes the provided method or method chain but instead of returning cash, returns the return values from each function invocation.
Example usage:</p>
<ul>
<li>$(nodeList).collect(‘getAttribute’, ‘foo’) #=&gt; [‘bar’, ‘biz’, ‘baz’];</li>
<li>$(nodeList).collect(‘classList.contains’, ‘active’) #=&gt; [true, false, true];</li>
<li>$(nodeList).collect(‘checked’) #=&gt; [true, false, false];</li>
</ul>
<p><code>param</code> {string} <code>methodName</code>. Can be a string representing a method name, an attribute, or a property. Can be chained with periods.</p>
<p><code>returns</code> {array}</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>cash.collect = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._all_(<span class="hljs-built_in">arguments</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>);
};</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <h3 id="off">off</h3>
<p>Remove event bindings from the q which match the given type and/or function.
By supplying “<em>.yourNamespace” as the event type, you can remove all events
in a namespace, or simply ‘</em>‘ to remove all events.
The optional third argument, ‘cap’, is a boolean than will need to be
<code>true</code> if you bound the event originally with <code>cap = true</code>.
NOTE: You do not need to pass the ‘cap’ bool in the ‘forced capture phase’
case, that is the event is ‘focus’ or ‘blur’ and is delegated. Cash will
handle the capture phase bool for you in that case.</p>
<p><code>param</code> {string} <code>type</code>. An event trigger, can be namespaced</p>
<p><code>param</code> {function}  <code>fn</code>. The function which should be removed, optional.</p>
<p><code>returns</code> cash</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>cash.off = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(type, fn, cap)</span> </span>{
  <span class="hljs-keyword">var</span> sp = type.split(<span class="hljs-string">'.'</span>), ev = sp[<span class="hljs-number">0</span>], ns = sp.splice(<span class="hljs-number">1</span>).join(<span class="hljs-string">'.'</span>),
    all = ev === <span class="hljs-string">'*'</span>, events;
  <span class="hljs-keyword">this</span>.q.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(el)</span> </span>{
    events = $.cache.events[$._getCid_(el)];
    <span class="hljs-keyword">if</span>(events) {
      (all ? keys(events) : [ev]).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(k)</span> </span>{
        events[k] &amp;&amp; events[k].forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(obj, i, ary)</span> </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>we may have forced the cap</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="hljs-keyword">if</span>(!cap &amp;&amp; (k === <span class="hljs-string">'focus'</span> || k === <span class="hljs-string">'blur'</span>) &amp;&amp; obj.sel) cap = <span class="hljs-literal">true</span>;
          <span class="hljs-keyword">if</span>((!ns || ns === obj.ns) &amp;&amp; (!fn || fn === obj.fn) &amp;&amp; (cap === obj.cap)) {
            el.removeEventListener(k, obj.cb, obj.cap);
            <span class="hljs-keyword">delete</span> ary[i];
          }
        });</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>remove the falsey indices that were deleted</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span>(events[k]) events[k] = events[k].filter(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(i)</span> </span>{<span class="hljs-keyword">return</span> i !== <span class="hljs-literal">undefined</span>;});
      });
    }
  });
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <h3 id="on">on</h3>
<p>Given an event type, a callback, an optional selector for delegation, and
an optional hash of data to be appended to the event, bind them to each
element in the q. Capture phase is supported by passing true as the
optional 5th argument. NOTE: if the event being bound is ‘focus’ or ‘blur’
and a selector is present capture phase is forced as delegation will not work otherwise.</p>
<p><code>param</code> {string} <code>type</code>. Can be “namespaced” i.e click.foo</p>
<p><code>param</code> {function} <code>fn</code></p>
<p><code>param</code> {string} <code>sel</code> optional CSS selector for delegation</p>
<p><code>param</code> {object} <code>data</code> optional hash to be appended to the event object</p>
<p><code>param</code> {bool} <code>cap</code> optional bool to force capture phase</p>
<p><code>returns</code> cash</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>cash.on = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(type, fn, sel, data, cap)</span> </span>{
  <span class="hljs-keyword">var</span> sp = type.split(<span class="hljs-string">'.'</span>), ev = sp[<span class="hljs-number">0</span>], ns = sp.splice(<span class="hljs-number">1</span>).join(<span class="hljs-string">'.'</span>),
    cb, events;</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>we force capture phase here so that delegation works</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">if</span>(!cap &amp;&amp; (ev === <span class="hljs-string">'focus'</span> || ev === <span class="hljs-string">'blur'</span>) &amp;&amp; sel) cap = <span class="hljs-literal">true</span>;
  <span class="hljs-keyword">this</span>.q.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(el)</span> </span>{
    events = $._setCache_(<span class="hljs-string">'events'</span>, el)[$._getCid_(el)];
    events[ev] || (events[ev] = []);
    cb = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
      <span class="hljs-keyword">var</span> targ, els;</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>pass the namespace along to the listener</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span>(ns) e.namespace = ns;</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>pass any custom data along to the listener</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span>(data) e.data = data;</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>base case is that this is not ‘delegated’</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span>(!sel) fn.call(el, e);</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>there is a sel, check for matches and call if so.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>set element list context</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        els = slice.call(el.querySelectorAll(sel));</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>check to see if any of our children matching the selector invoked the event</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span>(~els.indexOf(e.target)) targ = e.target;</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>otherwise see if any of the children matching the selector have el as their child</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">else</span> els.some(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(qel)</span></span>{ <span class="hljs-keyword">if</span>(qel.contains(e.target)) <span class="hljs-keyword">return</span> targ = qel; });</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>couldn’t find the source based on the selector so we don’t match</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span>(targ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>as defined by us rather than currentTarget</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          e.delegateTarget = targ;
          fn.call(targ, e);
        }
      }
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>cb === ours, fn === theirs.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    events[ev].push({ns: ns, sel: sel, cb: cb, fn: fn, cap: cap});
    el.addEventListener &amp;&amp; el.addEventListener(ev, cb, cap);
  });
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <h3 id="trigger">trigger</h3>
<p>Given an event type, init a DOM event and dispatch it to each element in the q.
If a ‘click’ event and a native click method exists on the <code>el</code> we will call that
as per some browsers security polices.</p>
<p><code>param</code> {string} <code>e</code></p>
<p><code>returns</code> cash</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>cash.trigger = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
  <span class="hljs-keyword">var</span> evt = <span class="hljs-built_in">document</span>.createEvent(<span class="hljs-string">'Event'</span>);
  evt.initEvent(e, <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>);
  <span class="hljs-keyword">this</span>.q.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(el)</span> </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>if triggering a click and the native method is there use it</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span>(e === <span class="hljs-string">'click'</span> &amp;&amp; isFunction(el.click)) el.click();
    <span class="hljs-keyword">else</span> el.dispatchEvent &amp;&amp; el.dispatchEvent(evt);
  });
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <h3 id="height">height</h3>
<p>Given a value this method is a setter for each element in the q.
If the arg is truthy and a number it is converted to a string with ‘px’
added, if it is a string nothing is added.
Minus that, it returns the height of the 0th item in the q;</p>
<p><code>param</code> {number|string} <code>val</code>. Optional value to be set</p>
<p><code>returns</code> {number|object} The height if a getter, cash if a setter</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>cash.height = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(val)</span> </span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._hw_(<span class="hljs-string">'height'</span>, val);};</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <h3 id="-_hw-_">_hw_</h3>
<p>Abstracted logic for the height and width operations</p>
<p><code>private</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>cash._hw_ = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(key, val)</span> </span>{
  <span class="hljs-keyword">var</span> obj = {
    height: {w:<span class="hljs-string">'innerHeight'</span>,d:<span class="hljs-string">'scrollHeight'</span>},
    width: {w:<span class="hljs-string">'innerWidth'</span>,d:<span class="hljs-string">'scrollWidth'</span>}
    }, node = <span class="hljs-keyword">this</span>.q[<span class="hljs-number">0</span>], d = isDocument(node) ? node.documentElement : <span class="hljs-literal">null</span>, 
    w = isWindow(node) ? node: <span class="hljs-literal">null</span>, type = obj[key], o;
  <span class="hljs-keyword">if</span>(!val) <span class="hljs-keyword">return</span> node ? w ? w[type.w] : d ? d[type.d] : (o = <span class="hljs-keyword">this</span>.offset()) &amp;&amp; o[key] : <span class="hljs-number">0</span>;
  <span class="hljs-keyword">this</span>.q.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(el)</span> </span>{
    el.style[key] = addPx(val);
  });
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <h3 id="width">width</h3>
<p>Given a value this method is a setter for each element in the q.
If the arg is truthy and a number it is converted to a string with ‘px’
added, if it is a string nothing is added.
Minus that, it returns the width of the 0th item in the q;</p>
<p><code>param</code> {number|string} <code>val</code>. Optional value to be set</p>
<p><code>returns</code> {number|object} The height if a getter, cash if a setter</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>cash.width = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(val)</span> </span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._hw_(<span class="hljs-string">'width'</span>, val);};</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <h3 id="is">is</h3>
<p>As querySelector cannot take psuedo selectors we provide this method to
easily filter the <code>q</code> to elements that do match the passed in selector.</p>
<p><code>param</code> {string} <code>sel</code></p>
<p><code>returns</code> cash</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>cash.is = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(sel)</span> </span>{
  <span class="hljs-keyword">this</span>.q = <span class="hljs-keyword">this</span>.q.filter(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(el)</span> </span>{<span class="hljs-keyword">return</span> $.matches(el, sel);});
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <h3 id="not">not</h3>
<p>As querySelector cannot take psuedo selectors we provide this method to
easily filter the <code>q</code> to elements that do not match the passed in selector</p>
<p><code>param</code> {string} <code>sel</code></p>
<p><code>returns</code> cash</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>cash.not = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(sel)</span> </span>{
  <span class="hljs-keyword">this</span>.q = <span class="hljs-keyword">this</span>.q.filter(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(el)</span> </span>{<span class="hljs-keyword">return</span> !$.matches(el, sel);});
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <h3 id="createelement">createElement</h3>
<p>Given a string, create a DOM element and store place in at the q. Notice
that the input must be a single ‘top-level’ Element, but it may contain
any number of children.</p>
<p><code>param</code> {string} <code>str</code>. An innerHTML compatible string</p>
<p><code>returns</code> cash</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>cash.createElement = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(str)</span> </span>{
  <span class="hljs-keyword">var</span> wrap = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'div'</span>);
  wrap.innerHTML = str;
  <span class="hljs-keyword">return</span> $(wrap.removeChild(wrap.firstElementChild));
};</pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <h3 id="remove">remove</h3>
<p>Used to not only remove the elements in the q from the DOM, but to 
remove any references they have in the $.cache as well.</p>
<p><code>returns</code> cash</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>cash.remove = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">rem</span><span class="hljs-params">(el)</span> </span>{<span class="hljs-keyword">delete</span> $.cache.events[el.getAttribute(<span class="hljs-string">'cid'</span>)];}
  <span class="hljs-keyword">this</span>.q.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(el)</span> </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p>unset any children</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    slice.call(el.querySelectorAll(<span class="hljs-string">'[cid]'</span>)).forEach(rem);</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p>now the top-level parent</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    rem(el);
    el.parentNode &amp;&amp; el.parentNode.removeChild(el);
  });
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <h3 id="hide">hide</h3>
<p>Makes elements in the q invisible in the DOM by modifying
the <code>display</code> attribute, if necessary.</p>
<p><code>returns</code> cash</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>cash.hide = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._sh_(<span class="hljs-string">'hide'</span>);};</pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <h3 id="show">show</h3>
<p>Makes elements in the q visible in the DOM by modifying
the <code>display</code> attribute, if necessary.</p>
<p><code>returns</code> cash</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>cash.show = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._sh_(<span class="hljs-string">'show'</span>);};</pre></div></div>
            
        </li>
        
        
        <li id="section-46">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-46">&#182;</a>
              </div>
              <h3 id="-_sh-_">_sh_</h3>
<p>Abstracted logic for the show and hide methods</p>
<p><code>private</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>cash._sh_ = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(key)</span> </span>{
  <span class="hljs-keyword">var</span> isShow = key === <span class="hljs-string">'show'</span>;
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">state</span><span class="hljs-params">(z)</span> </span>{<span class="hljs-keyword">return</span> isShow ? z !== <span class="hljs-string">'none'</span> : z === <span class="hljs-string">'none'</span>;}
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">none</span><span class="hljs-params">(arg)</span> </span>{<span class="hljs-keyword">return</span> isShow ? arg !== <span class="hljs-string">'none'</span>: arg === <span class="hljs-string">'none'</span>;}
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">notNone</span><span class="hljs-params">(arg)</span> </span>{<span class="hljs-keyword">return</span> isShow ? arg === <span class="hljs-string">'none'</span>: arg !== <span class="hljs-string">'none'</span>;}

  <span class="hljs-keyword">this</span>.q.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(el)</span> </span>{
    <span class="hljs-keyword">var</span> display = $._setCache_(<span class="hljs-string">'display'</span>, el), cid = el.getAttribute(<span class="hljs-string">'cid'</span>), old = display[cid],
      comp = getComputedStyle(el).display, styl = el.style.display, z = (comp || styl);
    <span class="hljs-keyword">if</span>(state(z)) {
      <span class="hljs-keyword">if</span>(none(old)) <span class="hljs-keyword">delete</span> display[cid];</pre></div></div>
            
        </li>
        
        
        <li id="section-47">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-47">&#182;</a>
              </div>
              <p>does an old display value exist?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (old &amp;&amp; none(old)) {
      el.style.display = old;
      <span class="hljs-keyword">delete</span> display[cid];</pre></div></div>
            
        </li>
        
        
        <li id="section-48">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-48">&#182;</a>
              </div>
              <p>the element is not visible and does not have an old display value</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    } <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-49">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-49">&#182;</a>
              </div>
              <p>is the element hidden with inline styling?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span>(styl &amp;&amp; notNone(styl)) {
        display[cid] = styl;
        el.style.display = isShow ? <span class="hljs-string">''</span> : <span class="hljs-string">'none'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-50">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-50">&#182;</a>
              </div>
              <p>the element is hidden through css</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      } <span class="hljs-keyword">else</span> el.style.display = isShow ? <span class="hljs-string">'block'</span>: <span class="hljs-string">'none'</span>;
    }
  });
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-51">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-51">&#182;</a>
              </div>
              <h3 id="toggle">toggle</h3>
<p>Toggles the visibility of elements in the DOM by modifying
the <code>display</code> attribute, if necessary.</p>
<p><code>returns</code> cash</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>cash.toggle = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-keyword">var</span> ary = slice.call(<span class="hljs-keyword">this</span>.q);
  ary.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(el)</span> </span>{
    getComputedStyle(el).display === <span class="hljs-string">'none'</span> ?
      $(el).show() : $(el).hide();
  });
  <span class="hljs-keyword">return</span> $(ary);
};</pre></div></div>
            
        </li>
        
        
        <li id="section-52">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-52">&#182;</a>
              </div>
              <h3 id="setstyle">setStyle</h3>
<p>Given a key and a value, or a hash of key:value pairs, set each on the style property of
each element in the <code>q</code>.
This method does not function as a getter (use getComputedStyle for that).</p>
<p><code>param</code> {string|object} <code>key</code></p>
<p><code>param</code> {string} <code>val</code>. Used if <code>key</code> is not an object</p>
<p><code>returns</code> cash</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>cash.setStyle = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(key, val)</span> </span>{
  <span class="hljs-keyword">var</span> ary = isString(key) ? <span class="hljs-literal">undefined</span> : keys(key),
  set = ary ? <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(el)</span> </span>{ary.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(i)</span> </span>{el.style[i] = addPx(key[i], i);});} :
    <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(el)</span> </span>{el.style[key] = addPx(val, key);};
  <span class="hljs-keyword">this</span>.q.forEach(set);
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-53">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-53">&#182;</a>
              </div>
              <h3 id="offset">offset</h3>
<p>Get a hash of key:value pairs: <code>top</code>, <code>left</code>, <code>width</code> and <code>height</code> - representing
the position in the document of the 0th element in the q. This method is a getter only
(use <code>css()</code> as a setter). Takes into consideration the page[X|Y]Offsets for
<code>left</code> and <code>top</code> as well as rounds the width and height</p>
<p><code>returns</code> {object}</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>cash.offset = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>.q.length) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">var</span> obj = <span class="hljs-keyword">this</span>.q[<span class="hljs-number">0</span>].getBoundingClientRect();
  <span class="hljs-keyword">return</span> {
    left: obj.left + <span class="hljs-built_in">window</span>.pageXOffset,
    top: obj.top + <span class="hljs-built_in">window</span>.pageYOffset,
    width: <span class="hljs-built_in">Math</span>.round(obj.width),
    height: <span class="hljs-built_in">Math</span>.round(obj.height)
  };
};</pre></div></div>
            
        </li>
        
        
        <li id="section-54">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-54">&#182;</a>
              </div>
              <h3 id="closest">closest</h3>
<p>Given a string selector, return the first parent node that matches it
for each element in the q.</p>
<p><code>param</code> {string} <code>sel</code></p>
<p><code>returns</code> cash</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>cash.closest = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(sel)</span> </span>{
  <span class="hljs-keyword">var</span> ary = [];
  <span class="hljs-keyword">this</span>.q.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(el)</span> </span>{
    <span class="hljs-keyword">while</span>(el &amp;&amp; !$.matches(el, sel)) el = !isDocument(el) &amp;&amp; el.parentNode;
    <span class="hljs-keyword">if</span>(el &amp;&amp; !~ary.indexOf(el)) ary.push(el);
  });
  <span class="hljs-keyword">return</span> $(ary);
};</pre></div></div>
            
        </li>
        
        
        <li id="section-55">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-55">&#182;</a>
              </div>
              <h3 id="contains">contains</h3>
<p>See if any element in the current q contains the passed in element,
setting the q as the container if found.</p>
<p><code>param</code> {element} <code>el</code></p>
<p><code>returns</code> cash</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>cash.contains = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(el)</span> </span>{
  <span class="hljs-keyword">var</span> res;
  <span class="hljs-keyword">this</span>.q.some(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(node)</span> </span>{
    <span class="hljs-keyword">if</span>(node.contains(el)) <span class="hljs-keyword">return</span> res = node;
  });
  <span class="hljs-keyword">return</span> $(res);
};</pre></div></div>
            
        </li>
        
        
        <li id="section-56">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-56">&#182;</a>
              </div>
              <h3 id="find">find</h3>
<p>From the existing q, rebuild it by performing a querySelectorAll
with the given selector on each element in the q, pushing those elements
found into the new q.</p>
<p><code>param</code> {string} <code>sel</code></p>
<p><code>returns</code> cash</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>cash.find = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(sel)</span> </span>{
  <span class="hljs-keyword">var</span> ary = [];
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fn</span><span class="hljs-params">(n)</span> </span>{ary.push(n);}
  <span class="hljs-keyword">this</span>.q.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(el)</span> </span>{
    <span class="hljs-keyword">if</span>(el.querySelectorAll) proto.forEach.call(el.querySelectorAll(sel),fn);
  });
  <span class="hljs-keyword">return</span> $(ary);
};</pre></div></div>
            
        </li>
        
        
        <li id="section-57">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-57">&#182;</a>
              </div>
              <h3 id="parent">parent</h3>
<p>Rehydrate the <code>q</code> with the parent element of each element in the <code>q</code></p>
<p><code>returns</code> cash</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>cash.parent = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-keyword">var</span> ary = [], p;
  <span class="hljs-keyword">this</span>.q.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(el)</span> </span>{
    <span class="hljs-keyword">if</span>(!~ary.indexOf(p = el.parentElement) &amp;&amp; p) ary.push(p);
  });
  <span class="hljs-keyword">return</span> $(ary);
};</pre></div></div>
            
        </li>
        
        
        <li id="section-58">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-58">&#182;</a>
              </div>
              <h3 id="parents">parents</h3>
<p>Rehydrate the <code>q</code> with the ascestor elements of each element in the <code>q</code></p>
<p><code>returns</code> cash</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>cash.parents = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-keyword">var</span> ary = [], p;
  <span class="hljs-keyword">this</span>.q.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(el)</span> </span>{
    p = el;
    <span class="hljs-keyword">while</span>((p = p.parentElement) &amp;&amp; !isDocument(p)) {
      <span class="hljs-keyword">if</span>(!~ary.indexOf(p)) ary.push(p);
    }
  });
  <span class="hljs-keyword">return</span> $(ary);
};</pre></div></div>
            
        </li>
        
        
        <li id="section-59">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-59">&#182;</a>
              </div>
              <h3 id="deserialize">deserialize</h3>
<p>Given a ‘paramaterized’ string, convert it to a hash and return it</p>
<p><code>param</code> {string} <code>str</code></p>
<p><code>returns</code> {object}</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>cash.deserialize = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(str)</span> </span>{
  <span class="hljs-keyword">var</span> obj = {}, ary;
  str &amp;&amp; str.split(<span class="hljs-string">'&amp;'</span>).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(spl)</span> </span>{
    <span class="hljs-keyword">if</span>(spl) {
      ary = spl.split(<span class="hljs-string">'='</span>);
      obj[<span class="hljs-built_in">decodeURIComponent</span>(ary[<span class="hljs-number">0</span>])] = <span class="hljs-built_in">decodeURIComponent</span>(ary[<span class="hljs-number">1</span>]);
    }
  });
  <span class="hljs-keyword">return</span> obj;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-60">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-60">&#182;</a>
              </div>
              <h3 id="extend">extend</h3>
<p>Copy the (non-inherited) key:value pairs from <n> source objects to a single target object.</p>
<p><code>params</code> {objects} A target object followed by <n> source objects</p>
<p><code>returns</code> {object} A single object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>cash.extend = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-keyword">var</span> args = slice.call(<span class="hljs-built_in">arguments</span>), targ = args.shift(), obj;
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fn</span><span class="hljs-params">(k)</span> </span>{targ[k] = obj[k];}</pre></div></div>
            
        </li>
        
        
        <li id="section-61">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-61">&#182;</a>
              </div>
              <p>iterate over each passed in obj remaining</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">for</span>(; args.length &amp;&amp; (obj = args.shift());) {keys(obj).forEach(fn);}
  <span class="hljs-keyword">return</span> targ;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-62">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-62">&#182;</a>
              </div>
              <h3 id="matches">matches</h3>
<p>Unfortunately the matchesSelector methods are all hidden behind prefixes ATM.
set the useable one, if not, then return the bool.</p>
<p><code>param</code> {element} <code>el</code>. A DOM 1 nodetype</p>
<p><code>param</code> {string}  <code>sel</code>. A CSS selector</p>
<p><code>returns</code> {bool}</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>cash.matches = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(el, sel)</span> </span>{
  <span class="hljs-keyword">if</span> (el.nodeType !== <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-63">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-63">&#182;</a>
              </div>
              <p>normalize the native selector match fn until all the prefixes are dropped</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>._matchesSelector_) {
    <span class="hljs-keyword">this</span>._matchesSelector_ = el.webkitMatchesSelector || el.mozMatchesSelector ||
    el.msMatchesSelector || el.oMatchesSelector || el.matchesSelector;
  }
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._matchesSelector_.call(el, sel);
};</pre></div></div>
            
        </li>
        
        
        <li id="section-64">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-64">&#182;</a>
              </div>
              <h3 id="serialize">serialize</h3>
<p>Given a hash of data, convert it to a ‘paramaterized’ string and return it.</p>
<p><code>param</code> {object} <code>obj</code></p>
<p><code>returns</code> {string}</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>cash.serialize = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(obj)</span> </span>{
  <span class="hljs-keyword">var</span> ary = [];
  keys(obj).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(key)</span> </span>{
    ary.push(<span class="hljs-built_in">encodeURIComponent</span>(key) +<span class="hljs-string">'='</span>+ <span class="hljs-built_in">encodeURIComponent</span>(obj[key]));
  });
  <span class="hljs-keyword">return</span> ary.join(<span class="hljs-string">'&amp;'</span>);
};
cash.version = <span class="hljs-string">"0.3.2"</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-65">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-65">&#182;</a>
              </div>
              <p>Not checking for window, or trying to play nice</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-built_in">window</span>.$ = cash;
}(<span class="hljs-built_in">window</span>));</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
